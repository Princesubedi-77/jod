<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden;
        }
        h1, h2, .valentine-font {
            font-family: 'Pacifico', cursive;
        }

        /* Floating Hearts Animation */
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .heart {
            position: absolute;
            bottom: -10vh;
            color: rgba(255, 255, 255, 0.6);
            animation: floatUp linear infinite;
        }
        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        /* Shake Animation */
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* Flip Card Styles */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-200 via-red-100 to-pink-300 min-h-screen text-red-600">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- COMPONENTS ---

        // 1. Floating Background Hearts
        const FloatingHearts = () => {
            const [hearts, setHearts] = useState([]);

            useEffect(() => {
                const newHearts = Array.from({ length: 20 }).map((_, i) => ({
                    id: i,
                    left: Math.random() * 100 + "%",
                    size: Math.random() * 20 + 10 + "px",
                    duration: Math.random() * 5 + 5 + "s",
                    delay: Math.random() * 5 + "s"
                }));
                setHearts(newHearts);
            }, []);

            return (
                <div className="hearts-container">
                    {hearts.map(heart => (
                        <div 
                            key={heart.id}
                            className="heart text-pink-400"
                            style={{
                                left: heart.left,
                                fontSize: heart.size,
                                animationDuration: heart.duration,
                                animationDelay: heart.delay
                            }}
                        >
                            ‚ù§Ô∏è
                        </div>
                    ))}
                </div>
            );
        };

        // 2. The Dynamic Cat SVG
        const Cat = ({ mood }) => {
            // Mood: 0 = Happy, 1 = Neutral, 2 = Sad, 3 = Crying, 4+ = Broken
            
            return (
                <div className="w-48 h-48 mx-auto relative transition-all duration-300 transform hover:scale-105">
                    <svg viewBox="0 0 200 200" className="w-full h-full drop-shadow-xl">
                        {/* Ears */}
                        <path d="M40 70 L60 20 L90 60 Z" fill="#FCA5A5" />
                        <path d="M160 70 L140 20 L110 60 Z" fill="#FCA5A5" />
                        
                        {/* Head */}
                        <ellipse cx="100" cy="110" rx="80" ry="70" fill="#FFF1F2" stroke="#FDA4AF" strokeWidth="3"/>
                        
                        {/* Eyes */}
                        {mood === 0 ? (
                            // Happy Eyes
                            <g>
                                <path d="M60 100 Q70 90 80 100" fill="none" stroke="#BE123C" strokeWidth="4" strokeLinecap="round"/>
                                <path d="M120 100 Q130 90 140 100" fill="none" stroke="#BE123C" strokeWidth="4" strokeLinecap="round"/>
                            </g>
                        ) : mood > 2 ? (
                            // Crying Eyes
                            <g>
                                <circle cx="70" cy="105" r="8" fill="#1F2937" />
                                <circle cx="130" cy="105" r="8" fill="#1F2937" />
                                <path d="M70 110 Q65 125 70 140" fill="#60A5FA" opacity="0.6" />
                                <path d="M130 110 Q135 125 130 140" fill="#60A5FA" opacity="0.6" />
                            </g>
                        ) : (
                            // Normal/Sad Eyes
                            <g>
                                <circle cx="70" cy="105" r={mood > 1 ? 8 : 10} fill="#1F2937" />
                                <circle cx="130" cy="105" r={mood > 1 ? 8 : 10} fill="#1F2937" />
                                {mood > 1 && <path d="M60 95 L80 100" stroke="#1F2937" strokeWidth="2"/>}
                                {mood > 1 && <path d="M140 95 L120 100" stroke="#1F2937" strokeWidth="2"/>}
                            </g>
                        )}

                        {/* Mouth */}
                        {mood === 0 ? (
                             <path d="M85 130 Q100 140 115 130" fill="none" stroke="#BE123C" strokeWidth="3" strokeLinecap="round"/>
                        ) : mood > 1 ? (
                             <path d="M90 135 Q100 125 110 135" fill="none" stroke="#BE123C" strokeWidth="3" strokeLinecap="round"/>
                        ) : (
                             <path d="M95 130 Q100 135 105 130" fill="none" stroke="#BE123C" strokeWidth="3" strokeLinecap="round"/>
                        )}

                        {/* Blush */}
                        <ellipse cx="50" cy="120" rx="10" ry="6" fill="#FDA4AF" opacity="0.6"/>
                        <ellipse cx="150" cy="120" rx="10" ry="6" fill="#FDA4AF" opacity="0.6"/>

                        {/* Sparkles (if happy) */}
                        {mood === 0 && (
                            <g className="animate-pulse">
                                <text x="160" y="50" fontSize="30">‚ú®</text>
                                <text x="20" y="80" fontSize="20">üíñ</text>
                            </g>
                        )}
                        {/* Tear (if crying) */}
                        {mood > 2 && (
                             <text x="140" y="110" fontSize="20" className="animate-bounce">üíß</text>
                        )}
                    </svg>
                </div>
            )
        }

        // 3. Flip Card Component
        const PizzaCard = () => {
            const [isFlipped, setIsFlipped] = useState(false);

            return (
                <div 
                    className="group w-64 h-80 cursor-pointer perspective-1000"
                    onClick={() => setIsFlipped(!isFlipped)}
                >
                    <div className={`relative w-full h-full duration-700 transform-style-3d transition-transform ${isFlipped ? 'rotate-y-180' : ''}`}>
                        
                        {/* Front */}
                        <div className="absolute w-full h-full bg-white rounded-2xl shadow-xl flex flex-col items-center justify-center backface-hidden border-4 border-pink-200">
                            <span className="text-6xl mb-4 animate-bounce">üéÅ</span>
                            <p className="font-bold text-pink-500 text-lg">Tap to reveal</p>
                            <p className="text-sm text-gray-400">your gift</p>
                        </div>

                        {/* Back */}
                        <div className="absolute w-full h-full bg-pink-100 rounded-2xl shadow-xl flex items-center justify-center backface-hidden rotate-y-180 overflow-hidden border-4 border-red-300">
                             <img 
                                src="image.png" 
                                alt="Pizza" 
                                className="w-full h-full object-cover"
                            />
                            <div className="absolute bottom-0 bg-white/80 w-full text-center py-2 font-bold text-red-500">
                                Bhosadike üçï
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- MAIN APP ---

        const App = () => {
            const [page, setPage] = useState(1);
            const [noCount, setNoCount] = useState(0);
            const [yesScale, setYesScale] = useState(1);
            
            // Phrases for the NO button
            const phrases = [
                "No",
                "Are you sure?",
                "Please don't...",
                "Think again!",
                "Look at the cat!",
                "You're breaking my heart",
                "I'm gonna cry...",
                "Last chance!",
                "Pretty please?",
                "Don't do this!"
            ];

            const handleNoClick = () => {
                setNoCount(noCount + 1);
                setYesScale(yesScale + 0.2); // Grow YES button
            };

            const handleYesClick = () => {
                // Trigger Confetti
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#ff0000', '#ffa500', '#ffffff', '#ff69b4']
                });
                
                // Continuous fireworks loop for a few seconds
                const duration = 3000;
                const end = Date.now() + duration;

                (function frame() {
                    confetti({
                        particleCount: 5,
                        angle: 60,
                        spread: 55,
                        origin: { x: 0 },
                        colors: ['#ffc0cb', '#ff69b4']
                    });
                    confetti({
                        particleCount: 5,
                        angle: 120,
                        spread: 55,
                        origin: { x: 1 },
                        colors: ['#ffc0cb', '#ff69b4']
                    });
                    if (Date.now() < end) {
                        requestAnimationFrame(frame);
                    }
                }());

                setNoCount(0); // Reset cat to happy
                setTimeout(() => setPage(2), 1500); // Transition after delay
            };

            const getNoText = () => {
                return phrases[Math.min(noCount, phrases.length - 1)];
            };

            // Cat Mood Calculation
            // 0 = happy (when yes clicked or initial), otherwise depends on noCount
            const catMood = page === 2 ? 0 : (noCount === 0 ? 1 : Math.min(noCount + 1, 5));

            return (
                <div className="relative z-10 min-h-screen flex flex-col items-center justify-center p-4">
                    <FloatingHearts />
                    
                    {page === 1 ? (
                        <div className="text-center max-w-md w-full bg-white/30 backdrop-blur-sm p-8 rounded-3xl shadow-2xl border border-white/50 transition-all">
                            
                            <Cat mood={catMood} />

                            <h1 className="text-4xl md:text-5xl font-bold text-red-600 mb-8 drop-shadow-sm mt-4">
                                Will you be my Valentine?
                            </h1>

                            <div className="flex flex-col md:flex-row items-center justify-center gap-4 min-h-[100px]">
                                <button
                                    onClick={handleYesClick}
                                    style={{ transform: `scale(${yesScale})` }}
                                    className="bg-gradient-to-r from-red-500 to-pink-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl hover:from-red-600 hover:to-pink-600 transition-all duration-300 transform"
                                >
                                    YES üíï
                                </button>

                                <button
                                    onClick={handleNoClick}
                                    className={`bg-gray-300 text-gray-700 font-semibold py-3 px-8 rounded-full shadow hover:bg-gray-400 transition-all duration-200 ${noCount > 0 ? 'shake' : ''}`}
                                >
                                    {getNoText()}
                                </button>
                            </div>
                        </div>
                    ) : (
                        <div className="text-center w-full max-w-4xl animate-fade-in-up">
                            <h1 className="text-5xl md:text-6xl font-bold text-white mb-4 drop-shadow-lg valentine-font">
                                I knew you‚Äôd say yes! üíï
                            </h1>
                            <p className="text-white text-xl mb-12 opacity-90">
                                Your order has been placed... kind of.
                            </p>
                            
                            {/* Cards Container */}
                            <div className="flex flex-col md:flex-row gap-8 items-center justify-center">
                                <PizzaCard />
                                <PizzaCard />
                                <PizzaCard />
                            </div>

                            <button 
                                onClick={() => {setPage(1); setYesScale(1); setNoCount(0)}}
                                className="mt-16 text-white underline decoration-wavy opacity-70 hover:opacity-100"
                            >
                                Replay Proposal
                            </button>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>
